@startuml
skinparam linetype ortho

class Image {
  +Integer id
  +Date creation_date
  +File file
}

class Authenticatable {
  +Integer id
  +String username
  +String email
  -String password
  
  {static} +Authenticatable authenticate(String username, String password)
}

class User {
  +Date creation_date

  +String nickname
  +String bio
  +Image profile_image
  +Image banner_image

  +User[] follows

  +Flake post_flake(String content, Image image, Flake reply_to)
  +void delete_flake(Flake flake)
  +Flake[] list_flakes()
  +Flake[] get_feeds()
  +void like(Flake flake)
  +void unlike(Flake flake)
  +void follow(User followee)
  +void unfollow(User followee)
  +User[] get_follows()
  +User[] get_followers()
}

Authenticatable <|-- User
User "0..*" <-- User : follows
User o-- "0..1" Image : profile
User o-- "0..1" Image : banner

class Flake {
  +Integer id
  +Date creation_date
  +User author
  +String content
  +Image image
  +Flake reply_to

  +Like[] get_likes()
  +Flake[] get_comments()
}

Flake "0..1" <-- Flake : reply
Flake o-- "0..1" Image : contains
Flake *-l- User : posts

class Like {
  +Integer id
  +Date creation_date
  +User user
  +Flake flake
}

User "0..*" -- "0..*" Flake
(User, Flake) .. Like


Like -[hidden]- Hidden
hide Hidden

@enduml
